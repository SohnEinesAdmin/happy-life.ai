<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy-Life App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #059669;
            animation: spin 1s ease infinite;
        }
        .dark .spinner { border-left-color: #34d399; }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const LoginOverlay = ({ onLogin }) => {
            const [name, setName] = useState('');

            const handleLogin = () => {
                if (name.trim()) {
                    onLogin(name.trim());
                } else {
                    alert('Bitte gib deinen Namen ein.');
                }
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-stone-50 dark:bg-gray-900">
                    <div className="w-full max-w-sm p-8 space-y-6 bg-white dark:bg-gray-800 rounded-xl shadow-lg">
                        <h2 className="text-3xl font-bold text-center text-emerald-700 dark:text-emerald-400">Willkommen!</h2>
                        <p className="text-center text-stone-600 dark:text-stone-400">Wie d√ºrfen wir dich nennen?</p>
                        <div>
                            <input
                                type="text"
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                                className="w-full p-3 text-center border border-stone-300 bg-white dark:bg-gray-700 dark:text-stone-200 dark:border-gray-600 rounded-md"
                                placeholder="Dein Name"
                            />
                        </div>
                        <button onClick={handleLogin} className="w-full bg-emerald-600 text-white px-4 py-3 rounded-lg hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 transition font-semibold">
                            Los geht's
                        </button>
                    </div>
                </div>
            );
        };

        const App = () => {
            // State Management
            const [userName, setUserName] = useState(null);
            const [theme, setTheme] = useState('light');
            const [activeTab, setActiveTab] = useState('zitate');
            
            // Quote State
            const [currentQuote, setCurrentQuote] = useState({ content: 'Gib ein Thema ein oder lade ein zuf√§lliges Zitat.', author: '' });
            const [quoteTopic, setQuoteTopic] = useState('');
            const [isQuoteLoading, setIsQuoteLoading] = useState(false);
            const [favorites, setFavorites] = useState([]);
            const [showFavorites, setShowFavorites] = useState(false);

            // Journal State
            const [journalPrompt, setJournalPrompt] = useState('');
            const [journalEntry, setJournalEntry] = useState('');
            const [journalHistory, setJournalHistory] = useState({});

            // Mood State
            const [moods, setMoods] = useState({});
            const [moodConfirmation, setMoodConfirmation] = useState('');
            const moodChartRef = useRef(null);
            const chartInstanceRef = useRef(null);

            // Breathing State
            const [isBreathing, setIsBreathing] = useState(false);
            const [breathingText, setBreathingText] = useState('Start');
            const breathingCircleRef = useRef(null);
            const breathingTimeouts = useRef([]);

            // Goals State
            const [goals, setGoals] = useState([]);
            const [goalInput, setGoalInput] = useState('');

            // Helper for Local Storage
            const getLocalStorage = (key, defaultValue) => {
                try {
                    const value = localStorage.getItem(key);
                    return value ? JSON.parse(value) : defaultValue;
                } catch (e) { return defaultValue; }
            };

            const setLocalStorage = (key, value) => {
                localStorage.setItem(key, JSON.stringify(value));
            };

            // Effects
            useEffect(() => {
                const savedName = getLocalStorage('userName');
                if (savedName) setUserName(savedName);

                const savedTheme = getLocalStorage('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                setTheme(savedTheme);

                setFavorites(getLocalStorage('favorites', []));
                setJournalHistory(getLocalStorage('journal', {}));
                setMoods(getLocalStorage('moods', {}));
                
                const todayGoals = getLocalStorage('goals', {})[new Date().toISOString().split('T')[0]] || [];
                setGoals(todayGoals);

                const journalPrompts = ["Worauf bist du heute stolz?", "Wof√ºr bist du heute dankbar?", "Was hat dir heute Freude bereitet?", "Was war heute eine kleine Herausforderung?", "Wem konntest du heute helfen?", "Was hast du heute Neues gelernt?", "Beschreibe einen sch√∂nen Moment von heute."];
                const today = new Date();
                const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
                setJournalPrompt(journalPrompts[dayOfYear % journalPrompts.length]);

                const todayKey = new Date().toISOString().split('T')[0];
                const savedJournal = getLocalStorage('journal', {})[todayKey];
                if (savedJournal) setJournalEntry(savedJournal.entry);

            }, []);

            useEffect(() => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                setLocalStorage('theme', theme);
            }, [theme]);

            useEffect(() => {
                setLocalStorage('favorites', favorites);
            }, [favorites]);
            
            useEffect(() => {
                setLocalStorage('journal', journalHistory);
            }, [journalHistory]);

            useEffect(() => {
                setLocalStorage('moods', moods);
                renderMoodChart();
            }, [moods, theme]);
            
            useEffect(() => {
                const allGoals = getLocalStorage('goals', {});
                const todayKey = new Date().toISOString().split('T')[0];
                allGoals[todayKey] = goals;
                setLocalStorage('goals', allGoals);
            }, [goals]);


            // Functions
            const handleLogin = (name) => {
                setUserName(name);
                setLocalStorage('userName', name);
            };
            
            const handleLogout = () => {
                setUserName(null);
                localStorage.removeItem('userName');
            };

            const toggleTheme = () => setTheme(theme === 'light' ? 'dark' : 'light');

            const generateAiQuote = async (isRandom = false) => {
                setIsQuoteLoading(true);
                let prompt;
                if (isRandom) {
                    const randomConcepts = ["die Stille nach dem Regen", "das Echo eines L√§chelns", "die Farbe der Dankbarkeit", "das Gewicht einer Erinnerung", "der Mut des ersten Schrittes", "die W√§rme eines geteilten Gedankens", "das Fl√ºstern der Zeit", "die Landkarte einer Narbe"];
                    const randomTopic = randomConcepts[Math.floor(Math.random() * randomConcepts.length)];
                    prompt = `Du bist ein weiser Philosoph. Schreibe einen einzigen, kurzen, originellen und poetischen Satz √ºber das Konzept "${randomTopic}". Zitiere keine bekannten Personen oder Sprichw√∂rter. Dein Satz sollte zum Nachdenken anregen. Gib nur den Satz selbst zur√ºck, ohne Anf√ºhrungszeichen.`;
                } else {
                    if (!quoteTopic.trim()) {
                        alert('Bitte gib ein Thema f√ºr dein Zitat ein.');
                        setIsQuoteLoading(false);
                        return;
                    }
                    prompt = `Erstelle ein kurzes, einzigartiges und inspirierendes Zitat auf Deutsch zum Thema: "${quoteTopic}". Das Zitat sollte positiv und ermutigend sein. Gib nur das Zitat selbst zur√ºck, ohne Anf√ºhrungszeichen.`;
                }

                try {
                    const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                    const apiKey = ""; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`API request failed: ${response.status}`);
                    const result = await response.json();
                    if (!result.candidates || result.candidates.length === 0) throw new Error('No content received from API.');

                    const text = result.candidates[0].content.parts[0].text;
                    setCurrentQuote({
                        content: text.trim(),
                        author: isRandom ? 'Inspiration des Tages' : ''
                    });
                } catch (error) {
                    console.error("Error generating AI quote:", error);
                    setCurrentQuote({ content: "Zitat konnte nicht geladen werden. Bitte versuche es sp√§ter erneut.", author: "System" });
                } finally {
                    setIsQuoteLoading(false);
                }
            };

            const addFavorite = () => {
                if (!currentQuote.content || currentQuote.author === 'System') return;
                if (!favorites.some(fav => fav.content === currentQuote.content)) {
                    setFavorites([...favorites, currentQuote]);
                    alert('Zitat zu Favoriten hinzugef√ºgt!');
                } else {
                    alert('Dieses Zitat ist bereits in deinen Favoriten.');
                }
            };
            
            const removeFavorite = (index) => {
                setFavorites(favorites.filter((_, i) => i !== index));
            };

            const saveJournalEntry = () => {
                if (!journalEntry.trim()) {
                    alert('Bitte schreibe zuerst etwas.');
                    return;
                }
                const todayKey = new Date().toISOString().split('T')[0];
                setJournalHistory({
                    ...journalHistory,
                    [todayKey]: { prompt: journalPrompt, entry: journalEntry.trim() }
                });
                alert('Eintrag gespeichert!');
            };

            const saveMood = (moodValue) => {
                const todayKey = new Date().toISOString().split('T')[0];
                setMoods({ ...moods, [todayKey]: parseInt(moodValue) });
                setMoodConfirmation('Stimmung f√ºr heute gespeichert!');
                setTimeout(() => setMoodConfirmation(''), 2000);
            };

            const renderMoodChart = () => {
                if (!moodChartRef.current) return;
                const chartData = { labels: [], data: [] };
                for (let i = 6; i >= 0; i--) {
                    const d = new Date();
                    d.setDate(d.getDate() - i);
                    const key = d.toISOString().split('T')[0];
                    chartData.labels.push(d.toLocaleDateString('de-DE', { weekday: 'short' }));
                    chartData.data.push(moods[key] || 0);
                }
                
                const isDark = theme === 'dark';
                const tickColor = isDark ? 'rgba(229, 231, 235, 0.7)' : 'rgba(75, 85, 99, 0.7)';
                const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';

                if (chartInstanceRef.current) {
                    chartInstanceRef.current.destroy();
                }

                const ctx = moodChartRef.current.getContext('2d');
                chartInstanceRef.current = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: chartData.labels,
                        datasets: [{
                            label: 'Stimmung', data: chartData.data,
                            backgroundColor: chartData.data.map(v => `rgba(16, 185, 129, ${0.2 + v * 0.2})`),
                            borderColor: 'rgba(16, 185, 129, 1)', borderWidth: 1, borderRadius: 4,
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: {
                            y: { beginAtZero: true, max: 4, ticks: { stepSize: 1, color: tickColor, callback: (v) => [' ', 'üòî', 'üòê', 'üôÇ', 'üòÉ'][v] || '' }, grid: { color: gridColor } },
                            x: { ticks: { color: tickColor }, grid: { display: false } }
                        },
                        plugins: { legend: { display: false } }
                    }
                });
            };

            const toggleBreathing = () => {
                if (isBreathing) {
                    breathingTimeouts.current.forEach(clearTimeout);
                    breathingTimeouts.current = [];
                    setBreathingText('Start');
                    if(breathingCircleRef.current) breathingCircleRef.current.style.transform = 'scale(1)';
                    setIsBreathing(false);
                } else {
                    setIsBreathing(true);
                    breatheCycle();
                }
            };

            const breatheCycle = () => {
                setBreathingText('Einatmen');
                if(breathingCircleRef.current) breathingCircleRef.current.style.transform = 'scale(1.5)';

                const t1 = setTimeout(() => {
                    setBreathingText('Halten');
                    const t2 = setTimeout(() => {
                        setBreathingText('Ausatmen');
                        if(breathingCircleRef.current) breathingCircleRef.current.style.transform = 'scale(1)';
                        const t3 = setTimeout(breatheCycle, 4000);
                        breathingTimeouts.current.push(t3);
                    }, 4000);
                    breathingTimeouts.current.push(t2);
                }, 4000);
                breathingTimeouts.current.push(t1);
            };
            
            useEffect(() => {
                return () => breathingTimeouts.current.forEach(clearTimeout);
            }, []);

            const addGoal = () => {
                if (!goalInput.trim()) return;
                setGoals([...goals, { text: goalInput.trim(), completed: false }]);
                setGoalInput('');
            };

            const toggleGoal = (index) => {
                const newGoals = [...goals];
                newGoals[index].completed = !newGoals[index].completed;
                setGoals(newGoals);
            };
            
            const deleteGoal = (index) => {
                setGoals(goals.filter((_, i) => i !== index));
            };
            
            const clearCompletedGoals = () => {
                setGoals(goals.filter(goal => !goal.completed));
            };

            if (!userName) {
                return <LoginOverlay onLogin={handleLogin} />;
            }
            
            const tabs = [
                { id: 'zitate', label: 'Zitate' },
                { id: 'tagebuch', label: 'Tagebuch' },
                { id: 'stimmung', label: 'Stimmung' },
                { id: 'atmung', label: 'Atmung' },
                { id: 'ziele', label: 'Ziele' },
            ];

            return (
                <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-stone-800 dark:text-stone-200">
                    <header className="text-center mb-8 relative">
                        <h1 className="text-3xl font-bold text-emerald-700 dark:text-emerald-400">Hallo, {userName}!</h1>
                        <p className="text-stone-600 dark:text-stone-400 mt-2">Dein t√§glicher Begleiter f√ºr mehr Wohlbefinden.</p>
                        <div className="absolute top-0 right-0 flex items-center gap-2">
                            <button onClick={toggleTheme} className="p-2 rounded-full text-stone-500 dark:text-yellow-300 hover:bg-stone-200 dark:hover:bg-gray-700">
                                {theme === 'light' ? <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg> : <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 5.05A1 1 0 003.636 6.464l.707.707a1 1 0 001.414-1.414l-.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zM6.464 16.364l.707-.707a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414z"></path></svg>}
                            </button>
                            <button onClick={handleLogout} className="p-2 rounded-full text-stone-500 dark:text-stone-400 hover:bg-stone-200 dark:hover:bg-gray-700">
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                            </button>
                        </div>
                    </header>
                    <nav className="mb-8 border-b border-stone-200 dark:border-gray-700">
                        <ul className="flex flex-wrap -mb-px justify-center text-sm font-medium text-center">
                            {tabs.map(tab => (
                                <li key={tab.id} className="mr-2">
                                    <button onClick={() => setActiveTab(tab.id)} className={`inline-block p-4 border-b-2 rounded-t-lg ${activeTab === tab.id ? 'border-emerald-600 text-emerald-600 dark:border-emerald-400 dark:text-emerald-400 font-semibold' : 'border-transparent text-stone-600 dark:text-stone-400 hover:text-stone-700 dark:hover:text-stone-300'}`}>
                                        {tab.label}
                                    </button>
                                </li>
                            ))}
                        </ul>
                    </nav>
                    <main>
                        {activeTab === 'zitate' && (
                             <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-stone-200 dark:border-gray-700 text-center">
                                <h2 className="text-2xl font-bold mb-4 text-emerald-700 dark:text-emerald-400">Personalisiertes Zitat</h2>
                                <p className="text-stone-600 dark:text-stone-400 mb-4">Wozu brauchst du heute Inspiration?</p>
                                <div className="flex flex-col sm:flex-row gap-2 mb-4">
                                    <input type="text" value={quoteTopic} onChange={(e) => setQuoteTopic(e.target.value)} className="flex-grow p-2 border border-stone-300 bg-white dark:bg-gray-700 dark:text-stone-200 dark:border-gray-600 rounded-md" placeholder="z.B. Motivation, Geduld, Freude..."/>
                                    <button onClick={() => generateAiQuote(false)} className="bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 transition">Zitat erstellen</button>
                                </div>
                                <div className="min-h-[12rem] flex flex-col justify-center items-center mb-4 p-4 bg-stone-50 dark:bg-gray-900/50 rounded-lg">
                                    {isQuoteLoading ? <div className="spinner"></div> : (
                                        <>
                                            <p className="text-xl italic text-stone-700 dark:text-stone-300">"{currentQuote.content}"</p>
                                            {currentQuote.author && <p className="text-right text-md text-stone-500 dark:text-stone-400 mt-4 w-full">- {currentQuote.author}</p>}
                                        </>
                                    )}
                                </div>
                                <div className="flex flex-wrap justify-center items-center gap-4 border-t border-stone-200 dark:border-gray-700 pt-4">
                                    <button onClick={() => generateAiQuote(true)} className="bg-stone-200 text-stone-700 px-4 py-2 rounded-lg hover:bg-stone-300 dark:bg-gray-700 dark:text-stone-300 dark:hover:bg-gray-600 transition">Zuf√§lliges Zitat</button>
                                    <button onClick={addFavorite} className="bg-stone-200 text-stone-700 px-4 py-2 rounded-lg hover:bg-stone-300 dark:bg-gray-700 dark:text-stone-300 dark:hover:bg-gray-600 transition">Favorit ‚òÖ</button>
                                    <button onClick={() => setShowFavorites(true)} className="bg-stone-200 text-stone-700 px-4 py-2 rounded-lg hover:bg-stone-300 dark:bg-gray-700 dark:text-stone-300 dark:hover:bg-gray-600 transition">Favoriten anzeigen</button>
                                </div>
                            </div>
                        )}
                        {activeTab === 'tagebuch' && (
                            <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-stone-200 dark:border-gray-700">
                                <h2 className="text-2xl font-bold mb-4 text-emerald-700 dark:text-emerald-400 text-center">{journalPrompt}</h2>
                                <textarea value={journalEntry} onChange={(e) => setJournalEntry(e.target.value)} rows="6" className="w-full p-3 border border-stone-300 bg-white dark:bg-gray-700 dark:text-stone-200 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-emerald-400 focus:outline-none" placeholder="Schreibe hier deine Gedanken..."></textarea>
                                <button onClick={saveJournalEntry} className="w-full mt-4 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 transition">Eintrag f√ºr heute speichern</button>
                                <div className="mt-6">
                                    <h3 className="text-xl font-bold mb-2 text-center">Vergangene Eintr√§ge</h3>
                                    <div className="space-y-4 max-h-96 overflow-y-auto p-2 bg-stone-50 dark:bg-gray-800 rounded-lg">
                                        {Object.keys(journalHistory).length === 0 ? <p className="text-stone-500 dark:text-stone-400 text-center">Keine Eintr√§ge gefunden.</p> :
                                            Object.keys(journalHistory).sort().reverse().map(key => (
                                                <div key={key} className="bg-white dark:bg-gray-700 p-4 rounded-lg border border-stone-200 dark:border-gray-600">
                                                    <p className="font-semibold text-stone-600 dark:text-stone-300">{new Date(key).toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric' })}: {journalHistory[key].prompt}</p>
                                                    <p className="text-stone-800 dark:text-stone-200 whitespace-pre-wrap mt-1">{journalHistory[key].entry}</p>
                                                </div>
                                            ))
                                        }
                                    </div>
                                </div>
                            </div>
                        )}
                        {activeTab === 'stimmung' && (
                             <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-stone-200 dark:border-gray-700">
                                <h2 className="text-2xl font-bold mb-4 text-emerald-700 dark:text-emerald-400 text-center">Wie f√ºhlst du dich heute?</h2>
                                <div className="flex justify-center space-x-2 sm:space-x-4 text-3xl sm:text-4xl mb-6">
                                   {[4, 3, 2, 1].map(mood => (
                                       <button key={mood} onClick={() => saveMood(mood)} className="p-2 rounded-full hover:bg-stone-200 dark:hover:bg-gray-700 transition transform hover:scale-110">
                                           {['', 'üòî', 'üòê', 'üôÇ', 'üòÉ'][mood]}
                                       </button>
                                   ))}
                                </div>
                                <p className="text-center text-emerald-600 dark:text-emerald-400 h-6">{moodConfirmation}</p>
                                <div className="mt-4">
                                    <h3 className="text-xl font-bold mb-2 text-center">Stimmungsverlauf der letzten 7 Tage</h3>
                                    <div className="relative w-full h-72 max-w-2xl mx-auto"><canvas ref={moodChartRef}></canvas></div>
                                </div>
                            </div>
                        )}
                        {activeTab === 'atmung' && (
                            <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-stone-200 dark:border-gray-700">
                                <h2 className="text-2xl font-bold mb-4 text-emerald-700 dark:text-emerald-400 text-center">Gef√ºhrte Atem√ºbung</h2>
                                <p className="text-stone-600 dark:text-stone-400 mb-6 text-center">Klicke auf den Kreis, um die √úbung zu starten oder zu stoppen.<br/>Folge den Anweisungen, um zur Ruhe zu kommen.</p>
                                <div className="flex flex-col items-center justify-center bg-stone-100 dark:bg-gray-900 rounded-lg p-6 h-80 border border-stone-200 dark:border-gray-700">
                                    <div ref={breathingCircleRef} onClick={toggleBreathing} className="w-40 h-40 bg-emerald-400 dark:bg-emerald-500 rounded-full flex items-center justify-center cursor-pointer shadow-lg" style={{ transition: 'transform 4s ease-in-out' }}>
                                        <span className="text-xl font-medium text-white text-center">{breathingText}</span>
                                    </div>
                                </div>
                            </div>
                        )}
                        {activeTab === 'ziele' && (
                            <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border border-stone-200 dark:border-gray-700">
                                <h2 className="text-2xl font-bold mb-4 text-emerald-700 dark:text-emerald-400 text-center">Meine Ziele f√ºr heute</h2>
                                <div className="flex gap-2 mb-4">
                                    <input type="text" value={goalInput} onChange={(e) => setGoalInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && addGoal()} className="flex-grow p-2 border border-stone-300 bg-white dark:bg-gray-700 dark:text-stone-200 dark:border-gray-600 rounded-md" placeholder="Neues Ziel hinzuf√ºgen..."/>
                                    <button onClick={addGoal} className="bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 transition">Hinzuf√ºgen</button>
                                </div>
                                <div className="space-y-2">
                                    {goals.length === 0 ? <p className="text-stone-500 dark:text-stone-400 text-center">Noch keine Ziele f√ºr heute.</p> :
                                        goals.map((goal, index) => (
                                            <div key={index} className={`flex items-center p-2 rounded-lg hover:bg-stone-100 dark:hover:bg-gray-700 ${goal.completed ? 'opacity-50' : ''}`}>
                                                <input type="checkbox" checked={goal.completed} onChange={() => toggleGoal(index)} className="h-5 w-5 text-emerald-600 border-stone-300 dark:border-gray-500 rounded focus:ring-emerald-500 mr-3 bg-transparent"/>
                                                <span className={`flex-grow text-stone-800 dark:text-stone-200 ${goal.completed ? 'line-through' : ''}`}>{goal.text}</span>
                                                <button onClick={() => deleteGoal(index)} className="text-red-400 hover:text-red-600 font-bold text-lg px-2">&times;</button>
                                            </div>
                                        ))
                                    }
                                </div>
                                {goals.some(g => g.completed) && <button onClick={clearCompletedGoals} className="w-full mt-4 bg-stone-500 text-white px-4 py-2 rounded-lg hover:bg-stone-600 dark:bg-gray-600 dark:hover:bg-gray-500 transition">Erledigte Ziele entfernen</button>}
                            </div>
                        )}
                    </main>

                    {showFavorites && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
                            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-11/12 max-w-lg p-6 relative">
                                <h2 className="text-2xl font-bold mb-4 text-emerald-700 dark:text-emerald-400">Meine Lieblingszitate</h2>
                                <div className="space-y-4 max-h-96 overflow-y-auto">
                                    {favorites.length === 0 ? <p className="text-stone-500 dark:text-stone-400">Noch keine Favoriten gespeichert.</p> :
                                        favorites.map((fav, index) => (
                                            <div key={index} className="bg-stone-100 dark:bg-gray-700 p-4 rounded-lg">
                                                <p className="italic">"{fav.content}"</p>
                                                {fav.author && <p className="text-right text-sm text-stone-500 dark:text-stone-400 mt-2">- {fav.author}</p>}
                                                <button onClick={() => removeFavorite(index)} className="text-red-500 text-sm mt-2 hover:underline">Entfernen</button>
                                            </div>
                                        ))
                                    }
                                </div>
                                <button onClick={() => setShowFavorites(false)} className="absolute top-4 right-4 text-stone-500 dark:text-stone-300 hover:text-stone-800 dark:hover:text-white text-2xl">&times;</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
